{"version":3,"file":"static/js/924.b5b71f41.chunk.js","mappings":"yIAUA,MAyBA,EAzB2DA,IACzD,MAAM,QAAEC,EAAO,WAAEC,EAAU,cAAEC,EAAa,aAAEC,GAAiBJ,EAgB7D,OACEK,EAAAA,EAAAA,KAACC,EAAAA,EAAS,CAACC,KAAK,QAAQC,KAAqB,aAAfN,EAA4B,OAAS,SAAUE,aAAcA,EACzFK,UAhBkBC,EAgBKT,EAhBkBU,IACxB,YAAfT,GACFC,EAAcO,GAAYE,SAASD,EAAIE,OAAOC,OAC9CC,aAAaC,QAAQ,cAAeC,KAAKC,UAAUf,MAEnDA,EAAcO,GAAaC,EAAIE,OAAOC,MACtCC,aAAaC,QAAQ,eAAgBC,KAAKC,UAAUf,OAUnBgB,QANpBR,IACfA,EAAIE,OAAOC,MAASH,EAAIE,OAAOC,MAAiBM,eAKKC,MAAO,CAAEC,SAAU,OACtEC,UAAW,CAAEC,UAAW,CAAEC,UAAW,EAAGC,UAAW,EAAGL,MAAO,CAAEM,WAAY,MAAOC,cAAe,WAjB/ElB,M,mMCDxB,MAiJA,EAjJqBmB,KAEnB,IAAIC,EAAyBb,KAAKc,MAAMhB,aAAaiB,QAAQ,gBAE7D,MAAOC,EAAcC,IAAmBC,EAAAA,EAAAA,UAASC,UAAUC,cAAc,GAAGC,QAAQC,IAAIC,GAAUA,EAAOC,WAClGC,EAAcC,IAAmBR,EAAAA,EAAAA,WAAS,GAC3CS,GAAcC,EAAAA,EAAAA,aAAOC,GAgB3B,OAdAC,EAAAA,EAAAA,WAAU,KAER,MAAMC,EAAUZ,UAAUC,cAAc,GAOxC,OANAM,EAAgBK,EAAQC,MAAQD,EAAQC,KAAKC,OAAS,GAEtDN,EAAYO,QAAUC,YAAY,KAChClB,EAAgBE,UAAUC,cAAc,GAAGC,QAAQC,IAAIC,GAAUA,EAAOC,YAGnE,KACLY,cAAcT,EAAYO,WAE3B,KAGD9C,EAAAA,EAAAA,KAAAiD,EAAAA,SAAA,CAAAC,UACEC,EAAAA,EAAAA,MAACC,EAAAA,EAAI,CAACC,WAAS,EAACC,QAAS,EAAGC,UAAU,SAAQL,SAAA,EAC5ClD,EAAAA,EAAAA,KAACoD,EAAAA,EAAI,CAACC,WAAS,EAACE,UAAU,MAAKL,UAC/BC,EAAAA,EAAAA,MAACK,EAAAA,EAAG,CAACC,UAAU,IAAGP,SAAA,EAChBlD,EAAAA,EAAAA,KAACwD,EAAAA,EAAG,CAACC,UAAU,OAAOC,GAAI,CAAEC,SAAU,SAAUC,WAAY,OAAQC,QAAS,UAAUX,SAAC,2BACxFlD,EAAAA,EAAAA,KAACwD,EAAAA,EAAG,CAACC,UAAU,OAAMP,SAAC,+DAGxBlD,EAAAA,EAAAA,KAACoD,EAAAA,EAAI,CAACC,WAAS,EAACE,UAAU,MAAKL,UAC7BC,EAAAA,EAAAA,MAACK,EAAAA,EAAG,CAAAN,SAAA,EACFlD,EAAAA,EAAAA,KAACwD,EAAAA,EAAG,CAAAN,UACFlD,EAAAA,EAAAA,KAACwD,EAAAA,EAAG,CAACC,UAAU,OAAOC,GAAI,CAAEG,QAAS,UAAWX,SAAC,+CAInDlD,EAAAA,EAAAA,KAACwD,EAAAA,EAAG,CAACM,QAAQ,OAAMZ,SAChBtB,EAAamC,OAAO,CAAC3B,EAAS4B,IAAOA,EAAK,IAAI9B,IAAI,CAACE,EAAS4B,KACzDhE,EAAAA,EAAAA,KAACwD,EAAAA,EAAG,CAAUS,UAAW,UAAY7B,EAAU,kBAAoB,IAAIc,SAAEc,GAA/DA,MAKfpC,EAAaiB,OAAS,KACrB7C,EAAAA,EAAAA,KAACwD,EAAAA,EAAG,CAACM,QAAQ,OAAMZ,SAChBtB,EAAamC,OAAO,CAAC3B,EAAS4B,IAAOA,GAAM,IAAI9B,IAAI,CAACE,EAAS4B,KAC1DhE,EAAAA,EAAAA,KAACwD,EAAAA,EAAG,CAAeS,UAAW,UAAY7B,EAAU,kBAAoB,IAAIc,SAAEc,EAAK,IAAzEA,EAAK,aAM3BhE,EAAAA,EAAAA,KAACoD,EAAAA,EAAI,CAACC,WAAS,EAAAH,UACblD,EAAAA,EAAAA,KAACkE,EAAAA,EAAc,CAAAhB,UACbC,EAAAA,EAAAA,MAACgB,EAAAA,EAAK,CAAC,aAAW,eAAcjB,SAAA,EAC9BlD,EAAAA,EAAAA,KAACoE,EAAAA,EAAS,CAAAlB,UACRC,EAAAA,EAAAA,MAACkB,EAAAA,EAAQ,CAAAnB,SAAA,EACPlD,EAAAA,EAAAA,KAACsE,EAAAA,EAAS,CAACC,MAAM,QAAQrE,KAAK,QAAOgD,SAAC,aACtClD,EAAAA,EAAAA,KAACsE,EAAAA,EAAS,CAACC,MAAM,QAAQrE,KAAK,QAAOgD,SAAC,qCAG1CC,EAAAA,EAAAA,MAACqB,EAAAA,EAAS,CAAAtB,SAAA,EACNC,EAAAA,EAAAA,MAACkB,EAAAA,EAAQ,CAAAnB,SAAA,EACPlD,EAAAA,EAAAA,KAACsE,EAAAA,EAAS,CAACC,MAAM,QAAQrE,KAAK,QAAOgD,SAAC,OACtClD,EAAAA,EAAAA,KAACsE,EAAAA,EAAS,CAACC,MAAM,QAAQrE,KAAK,QAAOgD,UACnClD,EAAAA,EAAAA,KAACyE,EAAAA,EAAgB,CACb7E,QAAS,IAAKC,WAAY,UAAWE,aAAc0B,EAAWiD,EAAG5E,cAAe2B,UAIxF0B,EAAAA,EAAAA,MAACkB,EAAAA,EAAQ,CAAAnB,SAAA,EACPlD,EAAAA,EAAAA,KAACsE,EAAAA,EAAS,CAACC,MAAM,QAAQrE,KAAK,QAAOgD,SAAC,OACtClD,EAAAA,EAAAA,KAACsE,EAAAA,EAAS,CAACC,MAAM,QAAQrE,KAAK,QAAOgD,UACnClD,EAAAA,EAAAA,KAACyE,EAAAA,EAAgB,CACb7E,QAAS,IAAKC,WAAY,UAAWE,aAAc0B,EAAWkD,EAAG7E,cAAe2B,UAIxF0B,EAAAA,EAAAA,MAACkB,EAAAA,EAAQ,CAAAnB,SAAA,EACPlD,EAAAA,EAAAA,KAACsE,EAAAA,EAAS,CAACC,MAAM,QAAQrE,KAAK,QAAOgD,SAAC,YACtClD,EAAAA,EAAAA,KAACsE,EAAAA,EAAS,CAACC,MAAM,QAAQrE,KAAK,QAAOgD,UACnClD,EAAAA,EAAAA,KAACyE,EAAAA,EAAgB,CACb7E,QAAS,SAAUC,WAAY,UAAWE,aAAc0B,EAAWmD,OAAQ9E,cAAe2B,UAIlG0B,EAAAA,EAAAA,MAACkB,EAAAA,EAAQ,CAAAnB,SAAA,EACPlD,EAAAA,EAAAA,KAACsE,EAAAA,EAAS,CAACC,MAAM,QAAQrE,KAAK,QAAOgD,SAAC,WACtClD,EAAAA,EAAAA,KAACsE,EAAAA,EAAS,CAACC,MAAM,QAAQrE,KAAK,QAAOgD,UACnClD,EAAAA,EAAAA,KAACyE,EAAAA,EAAgB,CACb7E,QAAS,QAASC,WAAY,UAAWE,aAAc0B,EAAWoD,MAAO/E,cAAe2B,UAIhG0B,EAAAA,EAAAA,MAACkB,EAAAA,EAAQ,CAAAnB,SAAA,EACPlD,EAAAA,EAAAA,KAACsE,EAAAA,EAAS,CAACC,MAAM,QAAQrE,KAAK,QAAOgD,UAAClD,EAAAA,EAAAA,KAAC8E,EAAAA,EAAS,CAACnB,SAAS,aAC1D3D,EAAAA,EAAAA,KAACsE,EAAAA,EAAS,CAACC,MAAM,QAAQrE,KAAK,QAAOgD,SACpCb,GAAcrC,EAAAA,EAAAA,KAAC8E,EAAAA,EAAS,CAACnB,SAAS,WACjC3D,EAAAA,EAAAA,KAACyE,EAAAA,EAAgB,CACb7E,QAAS,OAAQC,WAAY,UAAWE,aAAc0B,EAAWsD,KAAMjF,cAAe2B,UAK9F0B,EAAAA,EAAAA,MAACkB,EAAAA,EAAQ,CAAAnB,SAAA,EACPlD,EAAAA,EAAAA,KAACsE,EAAAA,EAAS,CAACC,MAAM,QAAQrE,KAAK,QAAOgD,UAAClD,EAAAA,EAAAA,KAACgF,EAAAA,EAAW,CAACrB,SAAS,aAC5D3D,EAAAA,EAAAA,KAACsE,EAAAA,EAAS,CAACC,MAAM,QAAQrE,KAAK,QAAOgD,SACpCb,GAAerC,EAAAA,EAAAA,KAACgF,EAAAA,EAAW,CAACrB,SAAS,WACpC3D,EAAAA,EAAAA,KAACyE,EAAAA,EAAgB,CACb7E,QAAS,KAAMC,WAAY,UAAWE,aAAc0B,EAAWwD,GAAInF,cAAe2B,UAK1F0B,EAAAA,EAAAA,MAACkB,EAAAA,EAAQ,CAAAnB,SAAA,EACPlD,EAAAA,EAAAA,KAACsE,EAAAA,EAAS,CAACC,MAAM,QAAQrE,KAAK,QAAOgD,UAAClD,EAAAA,EAAAA,KAACkF,EAAAA,EAAY,CAACvB,SAAS,aAC7D3D,EAAAA,EAAAA,KAACsE,EAAAA,EAAS,CAACC,MAAM,QAAQrE,KAAK,QAAOgD,SACpCb,GAAerC,EAAAA,EAAAA,KAACkF,EAAAA,EAAY,CAACvB,SAAS,WACrC3D,EAAAA,EAAAA,KAACyE,EAAAA,EAAgB,CACb7E,QAAS,QAASC,WAAY,UAAWE,aAAc0B,EAAW0D,MAAOrF,cAAe2B,UAKhG0B,EAAAA,EAAAA,MAACkB,EAAAA,EAAQ,CAAAnB,SAAA,EACPlD,EAAAA,EAAAA,KAACsE,EAAAA,EAAS,CAACC,MAAM,QAAQrE,KAAK,QAAOgD,UAAClD,EAAAA,EAAAA,KAACoF,EAAAA,EAAa,CAACzB,SAAS,aAC9D3D,EAAAA,EAAAA,KAACsE,EAAAA,EAAS,CAACC,MAAM,QAAQrE,KAAK,QAAOgD,SACpCb,GAAerC,EAAAA,EAAAA,KAACoF,EAAAA,EAAa,CAACzB,SAAS,WACtC3D,EAAAA,EAAAA,KAACyE,EAAAA,EAAgB,CACb7E,QAAS,OAAQC,WAAY,UAAWE,aAAc0B,EAAW4D,KAAMvF,cAAe2B,wB","sources":["components/CommandTextField.tsx","components/GamepadModal.tsx"],"sourcesContent":["import { TextField } from \"@mui/material\";\nimport { GamepadMap, KeyboardMap, KeyboardKey, CtrlKey } from \"../nes/utils/commons\";\n\ninterface CommandTextFieldProps {\n  ctrlKey: CtrlKey;\n  controller: 'keyboard' | 'gamepad';\n  defaultValue: string | number;\n  controllerMap: KeyboardMap | GamepadMap;\n}\n\nconst CommandTextField: React.FC<CommandTextFieldProps> = (props) => {\n  const { ctrlKey, controller, controllerMap, defaultValue } = props;\n\n  const updateConfig = (buttonId: CtrlKey) => (env: React.FocusEvent<HTMLInputElement>) => {\n    if (controller === 'gamepad') {\n      controllerMap[buttonId] = parseInt(env.target.value);\n      localStorage.setItem('gamepad-map', JSON.stringify(controllerMap));\n    } else {\n      controllerMap[buttonId] = (env.target.value as string) as KeyboardKey;\n      localStorage.setItem('keyboard-map', JSON.stringify(controllerMap));\n    }\n  }\n\n  const onInput = (env: React.FocusEvent<HTMLInputElement>) => {\n    env.target.value = (env.target.value as string).toUpperCase();\n  }\n\n  return (\n    <TextField size=\"small\" type={controller === 'keyboard' ? 'text' : 'number'} defaultValue={defaultValue}\n      onChange={updateConfig(ctrlKey)} onInput={onInput} style={{ maxWidth: '5vw' }}\n      slotProps={{ htmlInput: { maxLength: 1, minLength: 1, style: { paddingTop: '3px', paddingBottom: '3px' } } }}\n    />\n  );\n}\n\nexport default CommandTextField;","import { TableContainer, Table, TableHead, TableRow, TableCell, TableBody, Box, Grid } from '@mui/material';\nimport { GamepadMap } from '../nes/utils/commons';\nimport { useEffect, useRef, useState } from 'react';\nimport '../App.css';\nimport { ArrowBack, ArrowUpward, ArrowForward, ArrowDownward } from '@mui/icons-material';\nimport CommandTextField from './CommandTextField';\n\n\n/**\n * Called only when Gamepad has been detected.\n * @returns\n */\nconst GamepadModal = () => {\n\n  let gamepadMap: GamepadMap = JSON.parse(localStorage.getItem('gamepad-map'));\n\n  const [buttonsStats, setButtonsStats] = useState(navigator.getGamepads()[0].buttons.map(button => button.pressed));\n  const [axesIsActive, setAxesIsActive] = useState(false);\n  const intervalRef = useRef(undefined as NodeJS.Timer | undefined);\n\n  useEffect(() => {\n\n    const gamepad = navigator.getGamepads()[0];\n    setAxesIsActive(gamepad.axes && gamepad.axes.length > 1);\n\n    intervalRef.current = setInterval(() => {\n      setButtonsStats(navigator.getGamepads()[0].buttons.map(button => button.pressed));\n    });\n\n    return () =>  {\n      clearInterval(intervalRef.current);\n    };\n  }, []);\n\n  return (\n    <>\n      <Grid container spacing={1} direction=\"column\">\n        <Grid container direction=\"row\">\n        <Box component=\"p\">\n          <Box component=\"span\" sx={{ fontSize: '1.17em', fontWeight: 'bold', padding: '0 10px'}}>Gamepad Configuration</Box>\n          <Box component=\"span\">*A page reload may be necessary after configuration.</Box>\n        </Box>\n        </Grid>\n        <Grid container direction=\"row\">\n          <Box>\n            <Box>\n              <Box component=\"span\" sx={{ padding: '0 10px' }}>Gamepad Buttons Test (Press any button)</Box>\n            </Box>\n\n            {/* First 12 buttons */}\n            <Box display=\"flex\">\n              {buttonsStats.filter((pressed, id) => id < 12).map((pressed, id) =>\n                  <Box key={id} className={'circle' + (pressed ? ' circle-pressed' : '')}>{id}</Box>\n              )}\n            </Box>\n\n            {/* Remaining buttons if exist */}\n            {buttonsStats.length > 12 &&\n              <Box display=\"flex\">\n                {buttonsStats.filter((pressed, id) => id >= 12).map((pressed, id) =>\n                    <Box key={id + 12} className={'circle' + (pressed ? ' circle-pressed' : '')}>{id + 12}</Box>\n                )}\n              </Box>\n            }\n          </Box>\n        </Grid>\n        <Grid container>\n          <TableContainer>\n            <Table aria-label=\"simple table\">\n              <TableHead>\n                <TableRow>\n                  <TableCell align=\"right\" size=\"small\">Buttons</TableCell>\n                  <TableCell align=\"right\" size=\"small\">Assigned buttons (Numeric)</TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                  <TableRow>\n                    <TableCell align=\"right\" size=\"small\">A</TableCell>\n                    <TableCell align=\"right\" size=\"small\">\n                      <CommandTextField\n                          ctrlKey={'A'} controller={'gamepad'} defaultValue={gamepadMap.A} controllerMap={gamepadMap}\n                      />\n                    </TableCell>\n                  </TableRow>\n                  <TableRow>\n                    <TableCell align=\"right\" size=\"small\">B</TableCell>\n                    <TableCell align=\"right\" size=\"small\">\n                      <CommandTextField\n                          ctrlKey={'B'} controller={'gamepad'} defaultValue={gamepadMap.B} controllerMap={gamepadMap}\n                      />\n                    </TableCell>\n                  </TableRow>\n                  <TableRow>\n                    <TableCell align=\"right\" size=\"small\">SELECT</TableCell>\n                    <TableCell align=\"right\" size=\"small\">\n                      <CommandTextField\n                          ctrlKey={'SELECT'} controller={'gamepad'} defaultValue={gamepadMap.SELECT} controllerMap={gamepadMap}\n                      />\n                    </TableCell>\n                  </TableRow>\n                  <TableRow>\n                    <TableCell align=\"right\" size=\"small\">START</TableCell>\n                    <TableCell align=\"right\" size=\"small\">\n                      <CommandTextField\n                          ctrlKey={'START'} controller={'gamepad'} defaultValue={gamepadMap.START} controllerMap={gamepadMap}\n                      />\n                    </TableCell>\n                  </TableRow>\n                  <TableRow>\n                    <TableCell align=\"right\" size=\"small\"><ArrowBack fontSize='small'/></TableCell>\n                    <TableCell align=\"right\" size=\"small\">\n                    {axesIsActive ?<ArrowBack fontSize='small'/> :\n                      <CommandTextField\n                          ctrlKey={'LEFT'} controller={'gamepad'} defaultValue={gamepadMap.LEFT} controllerMap={gamepadMap}\n                      />\n                    }\n                    </TableCell>\n                  </TableRow>\n                  <TableRow>\n                    <TableCell align=\"right\" size=\"small\"><ArrowUpward fontSize='small'/></TableCell>\n                    <TableCell align=\"right\" size=\"small\">\n                    {axesIsActive ? <ArrowUpward fontSize='small'/> :\n                      <CommandTextField\n                          ctrlKey={'UP'} controller={'gamepad'} defaultValue={gamepadMap.UP} controllerMap={gamepadMap}\n                      />\n                    }\n                    </TableCell>\n                  </TableRow>\n                  <TableRow>\n                    <TableCell align=\"right\" size=\"small\"><ArrowForward fontSize='small'/></TableCell>\n                    <TableCell align=\"right\" size=\"small\">\n                    {axesIsActive ? <ArrowForward fontSize='small'/> :\n                      <CommandTextField\n                          ctrlKey={'RIGHT'} controller={'gamepad'} defaultValue={gamepadMap.RIGHT} controllerMap={gamepadMap}\n                      />\n                    }\n                    </TableCell>\n                  </TableRow>\n                  <TableRow>\n                    <TableCell align=\"right\" size=\"small\"><ArrowDownward fontSize='small'/></TableCell>\n                    <TableCell align=\"right\" size=\"small\">\n                    {axesIsActive ? <ArrowDownward fontSize='small'/> :\n                      <CommandTextField\n                          ctrlKey={'DOWN'} controller={'gamepad'} defaultValue={gamepadMap.DOWN} controllerMap={gamepadMap}\n                      />\n                    }\n                    </TableCell>\n                  </TableRow>\n              </TableBody>\n            </Table>\n          </TableContainer>\n        </Grid>\n      </Grid>\n    </>\n  );\n}\n\nexport default GamepadModal;"],"names":["props","ctrlKey","controller","controllerMap","defaultValue","_jsx","TextField","size","type","onChange","buttonId","env","parseInt","target","value","localStorage","setItem","JSON","stringify","onInput","toUpperCase","style","maxWidth","slotProps","htmlInput","maxLength","minLength","paddingTop","paddingBottom","GamepadModal","gamepadMap","parse","getItem","buttonsStats","setButtonsStats","useState","navigator","getGamepads","buttons","map","button","pressed","axesIsActive","setAxesIsActive","intervalRef","useRef","undefined","useEffect","gamepad","axes","length","current","setInterval","clearInterval","_Fragment","children","_jsxs","Grid","container","spacing","direction","Box","component","sx","fontSize","fontWeight","padding","display","filter","id","className","TableContainer","Table","TableHead","TableRow","TableCell","align","TableBody","CommandTextField","A","B","SELECT","START","ArrowBack","LEFT","ArrowUpward","UP","ArrowForward","RIGHT","ArrowDownward","DOWN"],"ignoreList":[],"sourceRoot":""}